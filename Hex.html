<!-- Save as: projects/hex-game.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Prism (syntax highlighting) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css">
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js"
          data-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs@1/components/"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hex Game with AI (Alpha–Beta Pruning) | Saber Sojudi</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- SEO / Social -->
  <meta name="description" content="Hex board game in Python with a pygame UI and an AI opponent powered by Minimax + Alpha–Beta pruning. Includes disjoint-set win detection and a 7×7 board."/>
  <meta property="og:title" content="Hex Game with AI (Alpha–Beta)" />
  <meta property="og:description" content="Python + pygame implementation of Hex with Minimax search and Alpha–Beta pruning." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="../assets/hex/hero.jpg" />
  <meta property="og:url" content="https://YOUR_DOMAIN/projects/hex-game.html" />
  <link rel="icon" href="../assets/favicon.png"/>

  <style>
    html { scroll-padding-top: 96px; }
    section[id] { scroll-margin-top: 96px; }

    .nav-link{
      position: relative; font-size: 1rem; line-height: 1.5rem; color: #374151;
    }
    .nav-link::after{
      content:''; position:absolute; left:0; right:0; bottom:-4px; height:2px; width:0;
      background-color:#3b82f6; transition:width .3s ease;
    }
    .nav-link:hover::after, .nav-link.active::after{ width:100%; }

    .code-wrap { position: relative; }
    pre.code, pre[class*="language-"]{
      background:#0b1021; color:#e6edf3; padding:16px 18px; border-radius:12px;
      overflow:auto; line-height:1.5; border:1px solid rgba(148,163,184,.25);
      box-shadow: 0 6px 18px rgba(2,8,23,.15);
      font-size:12.5px;
    }
    .token.comment,.token.prolog,.token.doctype { color:#94a3b8; }
    .token.keyword { color:#7aa2f7; }
    .token.function { color:#c099ff; }
    .token.number,.token.boolean { color:#f7768e; }
    .token.string { color:#9ece6a; }
    .token.operator { color:#89ddff; }

    .clamp { max-height: 20rem; }
    .code-overlay {
      content: ""; position:absolute; left:0; right:0; bottom:0; height:5rem;
      background: linear-gradient(to bottom, rgba(11,16,33,0) 0%, #0b1021 65%);
      border-bottom-left-radius:12px; border-bottom-right-radius:12px; pointer-events:none;
    }
    .expand-btn {
      position:absolute; right:14px; bottom:10px; z-index:2; font-size:.875rem; padding:.35rem .6rem;
      border-radius:8px; background:#111827; color:#fff; border:1px solid rgba(148,163,184,.35);
    }
    .expand-btn:hover { background:#0f172a; }

    .media-tile { position:relative; overflow:hidden; border-radius:16px;
                  background:#fff; border:1px solid rgba(100,116,139,.18); }
    .media-tile img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
  </style>
</head>
<body class="bg-gray-50">

  <!-- Header -->
  <nav class="fixed w-full bg-white bg-opacity-90 backdrop-blur-sm z-50 shadow-sm">
    <div class="max-w-6xl mx-auto px-6 py-4">
      <div class="flex items-center justify-between">
        <a href="../index.html" class="text-xl font-bold text-blue-600">Saber Sojudi</a>

        <!-- Desktop nav -->
        <div class="hidden md:flex space-x-8">
          <a href="#overview" class="nav-link">Overview</a>
          <a href="#features" class="nav-link">Features</a>
          <a href="#architecture" class="nav-link">Architecture &amp; Code</a>
        </div>

        <!-- Right cluster -->
        <div class="flex items-center gap-3">
          <a href="../index.html#projects"
             class="inline-flex items-center px-3 py-1.5 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-100"
             title="Back to projects">
            <i data-feather="arrow-left" class="w-4 h-4 mr-2"></i>
            <span class="hidden sm:inline">Back</span>
          </a>
          <button id="menuBtn" class="md:hidden text-gray-700" aria-label="Open Menu">
            <i data-feather="menu"></i>
          </button>
        </div>
      </div>

      <!-- Mobile drawer -->
      <div id="mobileMenu" class="md:hidden mt-3 hidden">
        <div class="flex flex-col space-y-3">
          <a href="#overview" class="nav-link">Overview</a>
          <a href="#features" class="nav-link">Features</a>
          <a href="#architecture" class="nav-link">Architecture &amp; Code</a>
          <a href="../index.html#projects" class="nav-link">← Back to Home</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="relative z-10">
    <!-- OVERVIEW -->
    <section id="overview" class="pt-28 pb-12">
      <div class="max-w-6xl mx-auto px-6">
        <div class="grid md:grid-cols-2 gap-10 items-start">
          <!-- LEFT: Text -->
          <div data-aos="fade-right">
            <h1 class="text-3xl md:text-4xl font-extrabold text-slate-900">
              Hex Game with AI (Alpha–Beta Pruning)
            </h1>
            <p class="mt-3 text-slate-700">
              Hex is a connection strategy game: one player links left–right edges, the other top–bottom, on an N×N hex grid.
              This implementation renders a 7×7 board with alternating turns and detects wins by checking path connectivity.
              The AI uses a <strong>Minimax</strong> search with <strong>Alpha–Beta pruning</strong> for efficient move selection.
            </p>
            <p class="mt-2 text-slate-700">
              Built in <strong>Python</strong> with <strong>pygame</strong> for graphics—simple to run locally and ideal for experimenting with search heuristics.
            </p>

            <!-- Skill chips -->
            <div class="mt-5 flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-slate-200 text-slate-700 shadow-sm">
                <i data-feather="terminal" class="w-4 h-4" style="stroke:#2563eb"></i> Python
              </span>
              <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-slate-200 text-slate-700 shadow-sm">
                <i data-feather="cpu" class="w-4 h-4" style="stroke:#2563eb"></i> AI algorithms
              </span>
              <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-slate-200 text-slate-700 shadow-sm">
                <i data-feather="git-branch" class="w-4 h-4" style="stroke:#2563eb"></i> Game theory
              </span>
              <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-slate-200 text-slate-700 shadow-sm">
                <i data-feather="shuffle" class="w-4 h-4" style="stroke:#2563eb"></i> Minimax
              </span>
              <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-slate-200 text-slate-700 shadow-sm">
                <i data-feather="zap" class="w-4 h-4" style="stroke:#2563eb"></i> Alpha–Beta pruning
              </span>
              <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-slate-200 text-slate-700 shadow-sm">
                <i data-feather="monitor" class="w-4 h-4" style="stroke:#2563eb"></i> pygame
              </span>
            </div>

            <!-- CTAs -->
            <div class="mt-6 flex flex-wrap gap-3">
              <a href="https://github.com/sabers13/bachelor-projects/tree/main/semester%205/Hex%20Game%20with%20AI(Alpha-Beta%20Pruning)"
                 target="_blank" rel="noopener"
                 class="inline-flex items-center px-5 py-2.5 rounded-lg bg-slate-900 text-white hover:bg-slate-800">
                <i data-feather="github" class="w-5 h-5 mr-2"></i> View on GitHub
              </a>
              <a href="../index.html#contact"
                 class="inline-flex items-center px-5 py-2.5 rounded-lg bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-700 hover:to-blue-600">
                <i data-feather="briefcase" class="w-5 h-5 mr-2"></i> Hire Me
              </a>
            </div>
          </div>

          <!-- RIGHT: Hero image + Code Map -->
          <div class="space-y-6" data-aos="fade-left">
            <figure class="rounded-2xl overflow-hidden shadow ring-1 ring-slate-200 bg-white">
              <img src="https://github.com/sabers13/bachelor-projects/blob/main/semester%205/Hex%20Game%20with%20AI(Alpha-Beta%20Pruning)/sample.png?raw=true" alt="Hex game hero" class="w-full h-[280px] object-cover cursor-zoom-in" />
            </figure>

            <aside class="bg-white rounded-xl p-6 shadow border border-slate-200">
              <div class="flex items-center justify-between mb-2">
                <h3 class="font-semibold text-slate-800">Code Map</h3>
                <i data-feather="map" class="w-4 h-4 text-blue-600"></i>
              </div>
<pre class="code language-text"><code>semester 5/
└─ Hex Game with AI(Alpha-Beta Pruning)/
   ├─ main.py              # pygame loop, input, AI turn, rendering
   ├─ disjointSet.py       # union–find (path compression) for connectivity
   ├─ Hex Board.png        # board image
   ├─ red piece.png        # red token
   ├─ blue piece.png       # blue token
   ├─ background.jpg       # backdrop
   └─ daneshgah_gilan.png  # window icon</code></pre>
            </aside>
          </div>
        </div>
      </div>
    </section>

    <!-- FEATURES -->
    <section id="features" class="py-10">
      <div class="max-w-6xl mx-auto px-6">
        <h2 class="text-2xl font-bold text-slate-900 mb-4">Features</h2>
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          <div class="bg-white p-5 rounded-xl shadow border border-slate-200" data-aos="fade-up">
            <div class="flex items-center gap-2 mb-2"><i data-feather="grid" class="text-blue-600"></i><h3 class="font-semibold">Hex Board Rendering</h3></div>
            <p class="text-slate-600 text-sm">Visualizes a 7×7 grid with offset columns and alternating turns.</p>
          </div>
          <div class="bg-white p-5 rounded-xl shadow border border-slate-200" data-aos="fade-up" data-aos-delay="50">
            <div class="flex items-center gap-2 mb-2"><i data-feather="cpu" class="text-blue-600"></i><h3 class="font-semibold">AI Opponent</h3></div>
            <p class="text-slate-600 text-sm">Minimax search with Alpha–Beta pruning for efficient decision-making.</p>
          </div>
          <div class="bg-white p-5 rounded-xl shadow border border-slate-200" data-aos="fade-up" data-aos-delay="100">
            <div class="flex items-center gap-2 mb-2"><i data-feather="users" class="text-blue-600"></i><h3 class="font-semibold">PvP / PvAI</h3></div>
            <p class="text-slate-600 text-sm">Human (Red) vs AI (Blue); extendable to PvP with minor changes.</p>
          </div>
          <div class="bg-white p-5 rounded-xl shadow border border-slate-200" data-aos="fade-up" data-aos-delay="150">
            <div class="flex items-center gap-2 mb-2"><i data-feather="check-circle" class="text-blue-600"></i><h3 class="font-semibold">Win Detection</h3></div>
            <p class="text-slate-600 text-sm">Union–find (disjoint-set) checks edge-to-edge connectivity.</p>
          </div>
          <div class="bg-white p-5 rounded-xl shadow border border-slate-200" data-aos="fade-up" data-aos-delay="200">
            <div class="flex items-center gap-2 mb-2"><i data-feather="shield" class="text-blue-600"></i><h3 class="font-semibold">Move Validation</h3></div>
            <p class="text-slate-600 text-sm">Enforces empty-cell placement to prevent illegal moves.</p>
          </div>
          <div class="bg-white p-5 rounded-xl shadow border border-slate-200" data-aos="fade-up" data-aos-delay="250">
            <div class="flex items-center gap-2 mb-2"><i data-feather="sliders" class="text-blue-600"></i><h3 class="font-semibold">Heuristic Scoring</h3></div>
            <p class="text-slate-600 text-sm">Evaluates proximity to target edge and local connectivity.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ARCHITECTURE & CODE -->
    <section id="architecture" class="py-10">
      <div class="max-w-6xl mx-auto px-6">
        <h2 class="text-2xl font-bold text-slate-900 mb-4">Architecture &amp; Code</h2>

        <!-- Two-column: diagram + bullets -->
        <div class="grid md:grid-cols-2 gap-8 items-stretch">
          <div class="bg-white rounded-xl p-6 shadow border border-slate-200" data-aos="fade-right">
            <h3 class="font-semibold text-slate-800 mb-2">Design (separation of concerns)</h3>
            <ul class="list-disc list-inside text-slate-700 space-y-1">
              <li><strong>Board &amp; Rendering:</strong> pygame window, images, piece positions, input mapping.</li>
              <li><strong>AI Engine:</strong> Minimax(depth=3) with Alpha–Beta pruning; heuristic evaluation.</li>
              <li><strong>Connectivity:</strong> Disjoint-set (union–find) for edge-to-edge win checks.</li>
              <li><strong>Game Loop:</strong> Event handling → human move → win check → AI move → win check.</li>
            </ul>
          </div>

          <div class="bg-white rounded-xl p-6 shadow border border-slate-200" data-aos="fade-left">
            <h3 class="font-semibold text-slate-800 mb-2">Key Parameters &amp; Notes</h3>
            <ul class="list-disc list-inside text-slate-700 space-y-1">
              <li>Board size: <code>7×7</code> cells.</li>
              <li>Minimax search depth: <code>3</code> plies with pruning.</li>
              <li>Heuristic: edge proximity + adjacency bonuses (Blue vs Red objectives).</li>
              <li>Connectivity: union neighbors on each placement; compare edge sets for a win.</li>
            </ul>
          </div>
        </div>

        <!-- Code highlights -->
        <div class="mt-10 grid md:grid-cols-2 gap-8 items-start">
          <!-- Board representation / positions -->
          <div class="bg-white rounded-xl p-5 shadow border border-slate-200" data-aos="fade-up">
            <div class="flex items-center justify-between mb-2">
              <p class="font-semibold text-slate-800 m-0">Board state &amp; positions (trimmed)</p>
              <span class="text-xs text-slate-500">main.py</span>
            </div>
<pre class="language-python"><code># 7×7 empty board; '' means empty, 'R'/'B' are players
pieceSet = [["" for _ in range(7)] for _ in range(7)]
piecePos = [[(0, 0) for _ in range(7)] for _ in range(7)]

def setPosition():
    # compute on-screen pixel coords for each hex cell (staggered)
    for x in range(7):
        for y in range(7):
            piecePos[x][y] = 150 + (x * 70) + (y * 35), 85 + (y * 60)</code></pre>
          </div>

          <!-- Union–find -->
          <div class="bg-white rounded-xl p-5 shadow border border-slate-200" data-aos="fade-up" data-aos-delay="50">
            <div class="flex items-center justify-between mb-2">
              <p class="font-semibold text-slate-800 m-0">Disjoint-set (union–find)</p>
              <span class="text-xs text-slate-500">disjointSet.py</span>
            </div>
<pre class="language-python"><code>class disjointSet:
    def __init__(self, elements):
        self.root = {e: e for e in elements}

    def find(self, a):
        if self.root[a] != a:
            self.root[a] = self.find(self.root[a])
        return self.root[a]

    def union(self, a, b):
        self.root[self.find(a)] = self.find(b)</code></pre>
          </div>

          <!-- Alpha–Beta search -->
          <div class="bg-white rounded-xl p-5 shadow border border-slate-200" data-aos="fade-up">
            <div class="flex items-center justify-between mb-2">
              <p class="font-semibold text-slate-800 m-0">Alpha–Beta pruning (depth=3)</p>
              <span class="text-xs text-slate-500">main.py</span>
            </div>
<pre class="language-python"><code>def minimax(isMax, depth, alpha, beta):
    if depth == 0 or gameOver:
        return evaluateBoard()

    if isMax:  # Blue (AI)
        best = -math.inf
        for x in range(7):
            for y in range(7):
                if pieceSet[x][y] == '':
                    pieceSet[x][y] = 'B'
                    best = max(best, minimax(False, depth-1, alpha, beta))
                    pieceSet[x][y] = ''
                    alpha = max(alpha, best)
                    if beta <= alpha: break  # prune
        return best
    else:      # Red (human)
        best = math.inf
        for x in range(7):
            for y in range(7):
                if pieceSet[x][y] == '':
                    pieceSet[x][y] = 'R'
                    best = min(best, minimax(True, depth-1, alpha, beta))
                    pieceSet[x][y] = ''
                    beta = min(beta, best)
                    if beta <= alpha: break  # prune
        return best</code></pre>
          </div>

          <!-- Heuristic -->
          <div class="bg-white rounded-xl p-5 shadow border border-slate-200" data-aos="fade-up" data-aos-delay="50">
            <div class="flex items-center justify-between mb-2">
              <p class="font-semibold text-slate-800 m-0">Evaluation function (heuristic)</p>
              <span class="text-xs text-slate-500">main.py</span>
            </div>
<pre class="language-python"><code>def evaluateBoard():
    blueScore = redScore = 0
    for x in range(7):
        for y in range(7):
            if pieceSet[x][y] == 'B':
                blueScore += (6 - x)  # closer to right edge
                for dx, dy in [(1,0),(1,-1),(0,1),(0,-1),(-1,0),(-1,1)]:
                    nx, ny = x+dx, y+dy
                    if 0 <= nx < 7 and 0 <= ny < 7 and pieceSet[nx][ny]=='B':
                        blueScore += 2
            elif pieceSet[x][y] == 'R':
                redScore += (6 - y)   # closer to bottom edge
                for dx, dy in [(1,0),(1,-1),(0,1),(0,-1),(-1,0),(-1,1)]:
                    nx, ny = x+dx, y+dy
                    if 0 <= nx < 7 and 0 <= ny < 7 and pieceSet[nx][ny]=='R':
                        redScore += 2
    return blueScore - redScore</code></pre>
          </div>

          <!-- Win check (Blue example) -->
          <div class="md:col-span-2 bg-white rounded-xl p-5 shadow border border-slate-200" data-aos="fade-up">
            <div class="flex items-center justify-between mb-2">
              <p class="font-semibold text-slate-800 m-0">Win check (Blue edge-to-edge via union–find)</p>
              <span class="text-xs text-slate-500">main.py</span>
            </div>
<pre class="language-python"><code>def blueWinCheck(x, y):
    # union with like-colored neighbors
    for dx, dy in [(1,0),(1,-1),(0,1),(0,-1),(-1,0),(-1,1)]:
        nx, ny = x+dx, y+dy
        if 0 <= nx <= 6 and 0 <= ny <= 6 and pieceSet[nx][ny] == 'B':
            dsBlue.union((x, y), (nx, ny))

    # if any row index i has left and right edges in same set → win
    for i in range(7):
        if dsBlue.find((0, i)) == dsBlue.find((6, i)):
            return True
    return False</code></pre>
          </div>
        </div>
      </div>
    </section>
  </main>
  <!-- Final CTA Row -->
  <section class="py-10">
    <div class="max-w-6xl mx-auto px-6">
      <div class="mt-8 flex flex-wrap gap-3">
        <a href="../index.html#contact"
           class="inline-flex items-center px-5 py-2.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700">
          <i data-feather="briefcase" class="w-5 h-5 mr-2"></i> Hire Me
        </a>
        <a href="https://github.com/sabers13/bachelor-projects/tree/main/semester%205/Hex%20Game%20with%20AI(Alpha-Beta%20Pruning)"
           target="_blank" rel="noopener"
           class="inline-flex items-center px-5 py-2.5 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-100">
          <i data-feather="github" class="w-5 h-5 mr-2"></i> Repository
        </a>
      </div>
    </div>
  </section>
  </main>


  <footer class="bg-gray-900 text-gray-300 py-10 mt-8">
    <div class="max-w-6xl mx-auto px-6 text-center">
      <p>&copy; 2025 Saber Sojudi. All rights reserved.</p>
    </div>
  </footer>

  <!-- Lightbox (global for ALL images) -->
  <div id="lightbox" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[80] hidden">
    <button class="absolute top-4 right-4 bg-white/95 hover:bg-white text-slate-900 rounded-full p-2 shadow" data-close aria-label="Close">
      <i data-feather="x" class="w-5 h-5"></i>
    </button>
    <div class="w-full h-full flex items-center justify-center p-4">
      <img id="lightboxImg" src="" alt="" class="max-w-7xl max-h-[90vh] w-auto h-auto object-contain rounded-lg shadow-lg bg-white">
    </div>
  </div>

  <script>
    AOS.init({ duration: 800, once: true });
    feather.replace();

    // Mobile menu toggle
    const btn = document.getElementById('menuBtn');
    const menu = document.getElementById('mobileMenu');
    if (btn && menu) btn.addEventListener('click', () => menu.classList.toggle('hidden'));

    // Smooth scroll with offset for fixed header
    function smoothTo(id){
      const el = document.querySelector(id);
      if(!el) return;
      const y = el.getBoundingClientRect().top + window.scrollY - 90;
      window.scrollTo({ top: y, behavior: 'smooth' });
    }
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const href = a.getAttribute('href');
        if (!href || href === '#') return;
        e.preventDefault();
        smoothTo(href);
        if (menu && !menu.classList.contains('hidden')) menu.classList.add('hidden');
      });
    });

    // Active link underline while scrolling (updated list)
    const ids  = ['#overview','#features','#architecture'];
    const secs = ids.map(i=>document.querySelector(i)).filter(Boolean);
    const links = Array.from(document.querySelectorAll('.nav-link')).filter(l=>ids.includes(l.getAttribute('href')));
    function setActive(){
      let current = secs[0];
      for (const s of secs){ if (s.getBoundingClientRect().top - 110 <= 0) current = s; }
      links.forEach(l=> l.classList.toggle('active', l.getAttribute('href') === '#'+current.id));
    }
    document.addEventListener('scroll', setActive, { passive:true });
    window.addEventListener('load', setActive);

    // Collapsible long code blocks
    const MAX = 320; // px
    document.querySelectorAll('pre.code, pre[class*="language-"]').forEach(pre=>{
      const wrap = pre.closest('.code-wrap') || pre.parentElement;
      wrap.classList.add('code-wrap');
      requestAnimationFrame(()=>{
        if (pre.scrollHeight > MAX) {
          pre.classList.add('clamp');
          const overlay = document.createElement('div');
          overlay.className = 'code-overlay';
          wrap.appendChild(overlay);
          const btn = document.createElement('button');
          btn.className = 'expand-btn';
          btn.textContent = 'Expand';
          btn.addEventListener('click', ()=>{
            const expanded = !pre.classList.contains('clamp');
            pre.classList.toggle('clamp');
            overlay.style.display = expanded ? 'block' : 'none';
            btn.textContent = expanded ? 'Expand' : 'Collapse';
          });
          wrap.appendChild(btn);
        }
      });
    });

    // GLOBAL LIGHTBOX — click ANY <img> to enlarge
    (function(){
      const lb = document.getElementById('lightbox');
      const img = document.getElementById('lightboxImg');
      const close = lb.querySelector('[data-close]');

      document.addEventListener('click', (e)=>{
        const pic = e.target.closest('img');
        if(!pic || pic.closest('#lightbox')) return;
        const src = pic.getAttribute('data-zoom') || pic.getAttribute('src');
        if(!src) return;
        img.src = src;
        lb.classList.remove('hidden');
      });

      close.addEventListener('click', ()=> lb.classList.add('hidden'));
      lb.addEventListener('click', (e)=> { if(e.target===lb) lb.classList.add('hidden'); });
      document.addEventListener('keydown', (e)=> { if(e.key==='Escape') lb.classList.add('hidden'); });
    })();
  </script>
</body>
</html>
